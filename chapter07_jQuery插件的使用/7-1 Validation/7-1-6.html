<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>7-1-6</title>
<!--引入jQuery-->
 <script src="../../scripts/jquery.js" type="text/javascript"></script>
 <!--验证-->
 <script src="../../scripts/lib/jquery.validate.js" type="text/javascript"></script>
 <!--自己写rule-->
 <script src="../../scripts/lib/jquery.metadata.js" type="text/javascript"></script>
 <!--国际化-->
  <script src="../../scripts/lib/jquery.validate.messages_cn.js" type="text/javascript"></script>
<style type="text/css">
* { font-family: Verdana; font-size: 96%; }
label { width: 10em; float: left; }
label.error { float: none; color: red; padding-left: .5em; vertical-align: top; }
p { clear: both; }
.submit { margin-left: 12em; }
em { font-weight: bold; padding-right: 1em; vertical-align: top; }
em.error {background: url("images/unchecked.gif") no-repeat 0px 0px; padding-left: 16px;}
em.success {background: url("images/checked.gif") no-repeat 0px 0px; padding-left: 16px;}
</style>
  
</head>
<body>

 <form class="cmxform" id="commentForm" method="get" action="">
 <fieldset>
   <legend>一个简单的验证带验证提示的评论例子</legend>
   <p>
     <label for="cusername">姓名</label>
     <em>*</em>
     <!--姓名必填，长度至少为2-->
     <input id="cusername" name="username" size="25" />
   </p>
   <p>
     <label for="cemail">电子邮件</label>
     <em>*</em>
     <!--邮箱必填，验证邮箱格式-->
     <input id="cemail" name="email" size="25"  />

   </p>
   <p>
     <label for="curl">网址</label>
     <em>  </em>
     <!--验证网址格式-->
     <input id="curl" name="url" size="25" value="" />
   </p>
   <p>
     <label for="ccomment">你的评论</label>
     <em>*</em>
     <!--评论必填-->
     <textarea id="ccomment" name="comment" cols="22" ></textarea>
   </p>
   <p>
     <label for="cvalcode">验证码</label>
     <em>*</em>
     7+9=<input id="valcode" name="valcode" size="25" value=""/>
   </p>
   <p>
     <input class="submit" type="submit" value="提交"/>
   </p>
 </fieldset>
 </form>

<script type="text/javascript">
  $(function(){
    //自定义一个验证方法
    $.validator.addMethod(
      "formula",  //验证方法的名称
      function(value,element,param){  //验证规则
        return value == eval(param);
      },
      '请输入正确的算术运算结果'  //提示
      );



    //验证form表单,将验证规则与html分开,通过name属性来关联字段和验证规则
    $("#commentForm").validate({
      rules:{
        username:{
          required : true,
          minlength : 2
        },
        email:{
          required : true,
          email : true
        },
        url:{
          url : true
        },
        comment : {
          required : true
        },
        valcode : {
          formula : "7+9"
        }
      },
      messages:{
        username:{
          required:'请输入姓名',
          minlength:'姓名长度至少为2位'
        },
        email:{
          required:'请输入邮箱',
          email:'请输入正确的邮箱地址'
        },
        url:{
          url:'请输入正确的网址'
        },
        comment:{
          required:'请输入您的评论'
        }
      },
      errorElement : "em",   //创建验证信息提示的标签
      success : function(label){   //label指上面的em
        label.text(" ").addClass("success");  //加上自定义的success类
      }
    })
  })
</script>

</body>
</html>
